{% extends 'sfrp/sfrp_base.html' %}
{% load i18n allauth account widget_tweaks %}

{% block head_title %}
    {% trans "Forgot Password" %}
{% endblock head_title %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center align-items-center" >
        <div class="col-md-4 col-lg-8">
            <div class="card shadow-lg border-0 rounded">
                <div class="card-body p-4 text-center"> <!-- Added text-center class -->
                    {% element h1 %}
                        <i class="fas fa-lock text-primary mr-2"></i> {% trans "Forgot Password?" %}
                    {% endelement %}

                    {% if user.is_authenticated %}
                        {% include "account/snippets/already_logged_in.html" %}
                    {% endif %}

                    {% element p %}
                        {% trans "Enter your email address below and we'll send you instructions to reset your password." %}
                    {% endelement %}

                    {% if form.non_field_errors %}
                        <div class="alert alert-danger" role="alert">
                            {% for error in form.non_field_errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}

                    {% url 'account_reset_password' as reset_url %}
                    {% element form form=form method="post" action=reset_url %}
                        {% slot body %}
                            {% csrf_token %}
                            <div class="form-group mb-3">
                                <label for="{{ form.email.id_for_label }}" class="form-label">{# form.email.label #}</label>
                                {{ form.email|add_class:"form-control"|attr:"placeholder:Enter your email address" }}
                                {% if form.email.help_text %}
                                    <small class="form-text text-muted">{{ form.email.help_text }}</small>
                                {% endif %}
                                {% if form.email.errors %}
                                    <div class="text-danger small">{{ form.email.errors }}</div>
                                {% endif %}
                            </div>
                            {{ redirect_field }}
                        {% endslot %}
                        {% slot actions %}
                            {% element button type="submit" class="btn btn-primary btn-lg btn-block mt-4 mb-3" %}
                                <i class="fas fa-paper-plane mr-2"></i> {% trans "Reset My Password" %}
                            {% endelement %}
                        {% endslot %}
                    {% endelement %}

                    {% element p %}
                        {% blocktrans %}Remember your password? {% endblocktrans %}
                        <a href="{% url 'account_login' %}">{% trans "Sign In here" %}</a>.
                    {% endelement %}

                    {% element p %}
                        {% blocktrans %}Please contact us if you have any trouble resetting your password.{% endblocktrans %}
                    {% endelement %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock content %}